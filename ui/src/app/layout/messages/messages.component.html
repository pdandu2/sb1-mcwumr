<ion-header [translucent]="true">
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-menu-button></ion-menu-button>
		</ion-buttons>
		<ion-title>Messages</ion-title>
	</ion-toolbar>
</ion-header>

<ion-content #IonContent fullscreen="false">
	<ion-list>
		<div *ngFor="let chat of msgList; let i = index; ">
			<ion-row *ngIf="chat.userId == User">
				<ion-col class="right" class="ion-no-padding"
					[ngClass]="{'clubbed':((msgList[i+1] && msgList[i+1].userId != chat.userId)|| !msgList[i+1])}">
					<div class="imageAvatarRight">
						<div class="imageAvatarBottom">
							<ion-avatar class="avatar"
								[ngClass]="(msgList[i+1] && msgList[i+1].userId == chat.userId)?'hidden':''">
								<div class="imageAvatarBottomIcon">
									<ion-icon name="add" expand="icon-only" color="light"> </ion-icon>
								</div>
								<ion-img class="user-img" src="./assets/avatar/avatar-finn.png"></ion-img>
							</ion-avatar>
						</div>
						<ion-label color="light">
							<div class="chatDiv" [ngClass]="{'sharper':((msgList[i+1] && msgList[i+1].userId == chat.userId) && 
				(msgList[i-1] && msgList[i-1].userId == chat.userId)),
				'sharper-top':(msgList[i-1] && msgList[i-1].userId == chat.userId),
				'sharper-bottom':(msgList[i+1] && msgList[i+1].userId == chat.userId)}">
								<p class="ion-text-wrap" class="ion-padding">{{chat.message}}
								</p>
								<div class="corner-parent-right">
									<div class="corner-child-right">

									</div>
								</div>
							</div>
						</ion-label>
					</div>
				</ion-col>
			</ion-row>
			<ion-row *ngIf="chat.userId == toUser">
				<ion-col class="left" class="ion-no-padding"
					[ngClass]="{'clubbed':((msgList[i+1] && msgList[i+1].userId != chat.userId)|| !msgList[i+1])}">
					<div class="imageAvatarLeft">
						<ion-label color="light">
							<div class="chatDiv" [ngClass]="{'sharper':((msgList[i+1] && msgList[i+1].userId == chat.userId) && 
				(msgList[i-1] && msgList[i-1].userId == chat.userId)),
				'sharper-top':(msgList[i-1] && msgList[i-1].userId == chat.userId),
				'sharper-bottom':(msgList[i+1] && msgList[i+1].userId == chat.userId)}">
								<p class="ion-text-wrap" class="ion-padding">{{chat.message}}</p>
								<div class="corner-parent-left">
									<div class="corner-child-left">
									</div>
								</div>
							</div>
						</ion-label>
						<div class="imageAvatarBottom">
							<ion-avatar class="avatar"
								[ngClass]="(msgList[i+1] && msgList[i+1].userId == chat.userId)?'hidden':''">
								<div class="imageAvatarBottomIcon">
									<ion-icon name="add" expand="icon-only" color="light"> </ion-icon>
								</div>
								<ion-img class="user-img" src="./assets/avatar/avatar-han.png"></ion-img>
							</ion-avatar>
						</div>
					</div>
				</ion-col>
			</ion-row>
			<ion-row *ngIf="((msgList[i+1] && msgList[i+1].userId != chat.userId)|| !msgList[i+1])">
				<ion-col>
					<ion-text>{{chat.time}}</ion-text>
				</ion-col>
			</ion-row>
		</div>
	</ion-list>

	<ion-fab vertical="end" horizontal="end" edge="true">
		<ion-fab-button (click)=" sendMsg()">
			<ion-icon name="send" expand="icon-only"></ion-icon>
		</ion-fab-button>
	</ion-fab>

	<ion-row *ngIf="loader">
		<ion-col class="ion-no-padding" class="loading-col">
			<div class="imageAvatarRight">
				<div class="imageAvatarBottomLoader">
					<ion-avatar class="avatar">
						<div class="imageAvatarBottomIcon">
						</div>
						<ion-img src="./assets/avatar/avatar-finn.png"></ion-img>
					</ion-avatar>
				</div>
				<ion-label>
					<div class="chatDivLoader">
						<ion-spinner name="dots" color="light"></ion-spinner>
						<div class="corner-parent-right">
							<div class="corner-child-right">
							</div>
						</div>
					</div>
				</ion-label>
			</div>
		</ion-col>
	</ion-row>
</ion-content>